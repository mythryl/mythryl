# This file was automatically generated by MDGen (v3.0)
# from the machine description file "ppc/ppc.md".

# Compiled by:
#     src/lib/compiler/backend/lower/make7/ppc.make6


# We are nowhere invoked.  And the code looks incomplete.

generic package ppc_delay_slots_g (

    package instruction_set:  Instruction_Set_Ppc;		# Instruction_Set_Ppc		is from   src/lib/compiler/backend/lower/ppc/instruction/instruction-set-ppc.api

    package p
	:
	Instruction_Properties					# Instruction_Properties	is from   src/lib/compiler/backend/lower/instruction/instruction-properties.api
	where instruction_set == instruction_set;
)

: (weak) Delay_Slot_Properties					# Delay_Slot_Properties		is from   src/lib/compiler/backend/lower/span/delay-slot-props.api

{
    package instruction_set = instruction_set;

    package i = instruction_set;

    Delay_Slot = D_NONE | D_ERROR | D_ALWAYS | D_TAKEN | D_FALLTHRU; 
   
    fun error msg = lowcode_error_message::error("ppc_delay_slots_g", msg);
    delay_slot_bytes = 4;

    fun delay_slot { instruction, backward }
        =
	delay_slot instruction
        where
	   fun delay_slot instruction
               = 
	       case instruction   
	           _ => { nop=>TRUE, n=>FALSE, n_on=>D_ERROR, n_off=>D_NONE };
               esac;
	end;

    fun enable_delay_slot _ = error "enableDelaySlot";
    fun conflict _ = error "conflict";

    fun delay_slot_candidate { jmp, delay_slot }
        =
	delay_slot_candidate  delay_slot
        where
	   fun delay_slot_candidate delay_slot
               = 
	       case delay_slot   
	           _ => TRUE;
               esac;
	end;

    fun set_target _ = error "setTarget";

};

